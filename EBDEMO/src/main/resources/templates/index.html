<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- boxicon cdn link -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- custom css link -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- <link rel="stylesheet" th:href="@{css/uikit.min.css}" />
    <script th:src="@{js/uikit.min.js}"></script>
    <script th:src="@{js/uikit-icons.min.js}"></script> -->
    

     <!-- add js for annualy, quartly, monthly bar graph -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" th:src="@{/script.js}"></script>

    <title>嘉義茶農 管理系統</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.11.0/css/uikit.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.11.0/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.11.0/js/uikit-icons.min.js"></script></head>

<body>
    <!-- header section start -->
    <header>
        <a href="#home"><img th:src="@{images/tea-logo.png}" alt="" width="110"></a>
        <nav class="navbar">
            <ul>
                <li><a href="#home">首頁</a></li>
                <li><a href="#inventory">庫存管理</a></li>
                <li><a href="#schedule">種植排程</a></li>
                <li><a href="#order">訂單</a></li>
                <li><a href="#cust-analysis">顧客分析</a></li>
                <li><a href="#sale-analysis">銷售分析</a></li>
                <li><a href="#cust-info">顧客資料查詢</a></li>

            </ul>
        </nav>

    </header>
    <!-- header section end -->

    <!-- home section start -->
    <div class="slider-container" id="home">
        <div class="slider">
            <!-- slide box -->
            <div class="slideBox active">
                <div class="textBox">
                    <h1>嘉義茶農 管理系統</h1>
                 </div>
                <div class="imgBox">
                    <img th:src="@{images/slider.webp}" alt="">
                </div>
            </div>
        </div>
       
    </div>
    <!-- home section end -->
   
<!-- inventory section -->
<div class="inventory" id="inventory">
    <div class="heading">
        <h1>庫存管理</h1>
    </div>

    <table>
        <thead>
            <tr>
                <th>圖片</th>
                <th>ID</th>
                <th>茶種</th>
                <th>庫存量</th>
                <th>零售價</th>
                <th>總庫存價值</th>
                <th>編輯</th>
            </tr>
        </thead>
        <tbody th:each="inventory, iterStat : ${inventories}">
            <tr >
                <!-- Existing Inventory Row -->
                <td><img class="image" th:src="@{'/images/' + ${inventory?.tea?.teaID} + '.jpg'}" alt="Tea Image"></td>
                <td th:text="${inventory.tea.teaID}"></td>
                <td th:text="${inventory.tea.teaName}"></td>
                <td th:text="${inventory.invQuantity}"></td>
                <td th:text="'＄' + ${inventory.invretailPrice}"></td>
                <td th:text="'＄' + ${inventory.totalInvValue}"></td>
                <td><button type="button" th:onclick="'showEditForm(' + ${iterStat.index} + ')'">編輯</button></td>
            </tr>
        
            <!-- Hidden Edit Form Row -->
            <tr th:id="'editForm-' + ${iterStat.index}" style="display:none;" th:if="${inventories}">
                <td colspan="7">
                    <form th:action="@{/inventory/update/{id}(id=${inventory?.tea?.teaID})}" th:method="post">
                        <input type="number" name="invQuantity" placeholder="庫存量" required/>
                        <input type="number" name="invretailPrice" placeholder="零售價" required/>
                        <button type="submit">完成</button>
                        <button type="button" th:onclick="'hideEditForm(' + ${iterStat.index} + ')'">放棄變更</button>
                    </form>
                </td>
            </tr>
        </tbody>
        
        
    </table>
</div>
<!-- inventory section end -->



    <!-- schedule section start -->
    <section class="schedule" id="schedule">
        <div class="heading">
            <h1>種植排程</h1>
        </div>
        <div class="box-container">
            <div class="box">
                <h3>種植狀況</h3>
                   <!-- 種植狀況資料-->
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>茶種</th>
                            <th>播種日期</th>
                            <th>預計收成日期</th>
                            <th>編輯</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>青心烏龍茶</td>
                            <td>03/26</td>
                            <td>11/03</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>文山包種茶</td>
                            <td>07/31</td>
                            <td>10/25</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>東方美人茶</td>
                            <td>11/15</td>
                            <td>05/11</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br><br>
            <div class="box">
                 <h3>生長情況</h3>
                    <!-- 生長情況<資料-->
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>茶種</th>
                                <th>第 1 ~ 10 天</th>
                                <th>第 11 ~ 20 天</th>
                                <th>第 21 ~ 30 天</th>
                                <th>第 31 ~ 40 天</th>
                                <th>第 41 ~ 50 天</th>
                                <th>50 天 +</th>
                                <th>編輯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>青心烏龍茶</td>
                                <td><a href="https://www.example.com">很好。</a></td>
                                <td><a href="https://www.example.com">完美。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>文山包種茶</td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>東方美人茶</td>
                                <td><a href="https://www.example.com">完美。</a></td>
                                <td><a href="https://www.example.com">須留意。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com">死亡。</a></td>
                                <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                            </tr>
                        </tbody>
                    </table>
            </div>
            <br><br>
            <div class="box">
                <h3>處理階段</h3>
                <!-- 處理階段資料-->
                <br>
                <label for="datepicker">選擇日期：</label>
                <input type="date" id="datepicker" name="datepicker">
                <script>
                    // 取得今天的日期
                    const today = new Date().toISOString().split('T')[0];
                    
                    // 將日期設定為今天
                    document.getElementById('datepicker').value = today;
                </script>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>茶種</th>
                            <th>上個階段</th>
                            <th>目前階段</th>
                            <th>下個階段</th>
                            <th>編輯</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>青心烏龍茶</td>
                            <td>播種完畢</td>
                            <td>種植中</td>
                            <td>準備收成</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>文山包種茶</td>
                            <td>種植完畢</td>
                            <td>收成中</td>
                            <td>準備修剪</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>東方美人茶</td>
                            <td>修剪完畢</td>
                            <td>包裝中</td>
                            <td>準備運送</td>
                            <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                        </tr>
                    </tbody>
                </table>


            </div>
        </div>
    </section>
    <!-- schedule section end -->

   <!-- order section start -->
   <section class="order" id="order">
    <div class="heading">
        <h1>訂單</h1>
        <br>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>顧客名稱</th>
                    <th>青心烏龍茶 ＄50/一包</th>
                    <th>文山包種茶 ＄70/一包</th>
                    <th>東方美人茶 ＄60/一包</th>
                    <th>總金額</th>

                    <th>聯絡確認</th>
                    <th>編輯</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>John Doe</td>
                    <td>50 包</td>
                    <td>30 包</a></td>
                    <td>70 包</td>
                    <td>＄8800</td>
                    <td>12/15 聯絡</td>
                    <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Jane Smith</td>
                    <td>40 包</td>
                    <td>80 包</a></td>
                    <td>10 包</td>
                    <td>＄8200</td>
                    <td>尚未聯絡</td>
                    <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Alice Johnson</td>
                    <td>10 包</td>
                    <td>50 包</a></td>
                    <td>90 包</td>
                    <td>＄9400</td>
                    <td>12/11 聯絡</td>
                    <td><a href="https://www.example.com"><img class="editIcon" th:src="@{images/edit.jpg}"></a></td>
                </tr>
            </tbody>
        </table>
    </div>

</section>
    <!-- order section end -->

 <!-- Customer anlaysis section start -->
 <section class="cust-analysis" id="cust-analysis">
    <div class="heading">
        <h1>顧客分析</h1>
    </div>
    <div class="box-container">
        <!-- 顧客終生價值 Box -->
        <div class="box" id="cust-clv">
            <h2>終生價值</h2>
            <div class="box-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>CLV</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>John Doe</td>
                            <td>$500</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Jane Smith</td>
                            <td>$750</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Alice Johnson</td>
                            <td>$600</td>
                        </tr>
                    </tbody>
                </table>
            </div>
         </div>
        <!-- 顧客年齡分佈 Box -->
        <div class="box" id="cust-age">
            <h2>年齡分佈</h2>
            <div id="age-barchart" style="width: 700px; height: 500px;"></div>

         </div>
        <!-- 顧客地區分佈 Box -->
        <div class="box" id="cust-location">
            <h2>地區分佈</h2>
            <div id="location-piechart" style="width: 700px; height: 500px;"></div>

         </div>
    </div>
</section>
<!-- cust analysis section end -->


<!-- sale anlaysis section start -->
<section class="sale-analysis" id="sale-analysis">
    <div class="heading">
        <h1>銷售分析</h1>
    </div>
    <div class="box-container">
        <!-- 年銷售額 Box -->
         <div class="box" id="annual-sales-box">
            <h2>年銷售額</h2>
            <div id="annual_chart" style="width:800px; height:500px;"></div>
        </div>
         <!-- 季銷售額 Box -->
        <div class="box" id="quart-sales-box">
            <h2>季銷售額</h2>
            <div id="quart_chart" style="width:800px; height:500px;"></div>
        </div>

        <!-- 月銷售額 Box -->
        <div class="box" id="month-sales-box">
            <h2>月銷售額</h2>
            <div id="month_chart" style="width:800px; height:500px;"></div>
        </div>
   
    </div>
</section>
    <!-- sale analysis section end -->

<!-- cust info section start -->
<section class="uk-background-cover " id="cust-info">
    <div class="heading">
        <h1>顧客資料查詢</h1>
        <!-- <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search...">
            <button onclick="searchTable()">收尋</button>
            <form class="uk-search uk-search-default">
                <a href="" uk-search-icon></a>
                <input class="uk-search-input" type="search" placeholder="" aria-label="">
            </form>
            新增按钮，触发数据加载
            <button onclick="loadCustomerData()" class="uk-button uk-button-primary">加載顧客資料</button>
        </div> -->
        <div class="uk-margin">
            <form class="uk-search uk-search-default" >
                <a href="" class="uk-search-icon-flip" uk-search-icon></a>
                <input class="uk-search-input" type="search" placeholder="Search" aria-label="Search">
            </form>
        </div>
        <button onclick="loadCustomerData()"  class="uk-button uk-button-default">加載顧客資料</button>

    </div>
    <div class="box-container ">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Location</th>
                    <th>Phone Number</th>
                    <th>Recency</th>
                    <th>CLV</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="customer : ${customers}">
                    <td th:text="${customer.customerId}"></td>
                    <td th:text="${customer.name}"></td>
                    <td th:text="${customer.age}"></td>
                    <td th:text="${customer.address}"></td>
                    <td th:text="${customer.phoneNumber}"></td>
                    <td th:text="${customer.lastPurchaseDate}"></td>
                    <td th:text="${customer.clv}"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <hr class="uk-divider-icon">
</section>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</body>
<footer class="">
    <p class="uk-text-small uk-text-muted">嘉義茶農 管理系統</p>

</footer>
</html>